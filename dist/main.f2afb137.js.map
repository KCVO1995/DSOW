{"version":3,"sources":["main.js"],"names":["clock","state","speed","level","music","currentScore","$","node","document","querySelector","creatediv","className","div","createElement","start","classList","add","i","createrow","onclick","ev","judge","event","window","setInterval","move","target","indexOf","parentNode","pass1","cloneNode","play","pass","score","fail","clearInterval","failShow","setTimeout","reset","innerHTML","remove","style","top","con","row","time","transition","height","arr","creatcell","appendChild","firstChild","insertBefore","temp","Math","floor","random","parseInt","getComputedStyle","over","delrow","rows","childNodes","length","speedup","removeChild","lastChild","levelShow","onload"],"mappings":"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","file":"main.f2afb137.js","sourceRoot":"..\\src","sourcesContent":["let clock = null;\r\nlet state = 0;\r\nlet speed = 8;\r\nlet level = 1\r\nlet music = 1\r\nlet currentScore = 0\r\n\r\n\r\n\r\nwindow.onload = () => {\r\n    const startButton = $('.start')\r\n    startButton.onclick = start\r\n}\r\n\r\n// 工具封装\r\n// 根据id来获取元素\r\nfunction $(node) {\r\n    return document.querySelector(node);\r\n}\r\n\r\n// 创建div, className是其类名\r\nfunction creatediv(className) {\r\n    var div = document.createElement('div');\r\n    div.className = className;\r\n    return div;\r\n}\r\n\r\n//点击开始游戏按钮 开始游戏\r\nfunction start() {\r\n    $('.start').classList.add('hidden')\r\n\r\n    for (var i = 0; i < 4; i++) {\r\n        createrow();\r\n    }\r\n\r\n    // 添加onclick事件\r\n    $('main').onclick = function (ev) {\r\n        // 通过clone方法实现多个声音同时响起\r\n        ev = ev || event\r\n        judge(ev);\r\n    }\r\n\r\n    // 定时器 每30毫秒调用一次move()\r\n    clock = window.setInterval(move, 50);\r\n}\r\n\r\n\r\n// 判断是否点击黑块、白块\r\nfunction judge(ev) {\r\n    if (ev.target.className.indexOf('black') === -1 && ev.target.className.indexOf('cell') !== -1) {\r\n        ev.target.parentNode.pass1 = 1; //定义属性pass1，表示此行row的白块已经被点击\r\n    }\r\n\r\n    if (ev.target.className.indexOf('black') !== -1) {\r\n        //点击目标元素 类名中包含 black 说明是黑块\r\n        $(`#audio${music}`).cloneNode().play();\r\n        music += 1\r\n        if (music === 9) music = 1\r\n        ev.target.className = 'cell';\r\n        // TODO\r\n        ev.target.parentNode.pass = 1; //定义属性pass，表明此行row的黑块已经被点击\r\n        score();\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\n// 游戏结束\r\nfunction fail() {\r\n    $(`#audio0`).cloneNode().play();\r\n    clearInterval(clock);\r\n    // confirm(`你的最终得分为${currentScore}`);\r\n    failShow()\r\n    setTimeout(() => { reset() }, 1500)\r\n}\r\nfunction reset() {\r\n    var con = $('#con');\r\n    con.innerHTML = \"\";\r\n    $('.start').classList.remove('hidden')\r\n    $('#con').style.top = '-408px';\r\n    $('#score').innerHTML = `score 0`\r\n    speed = 8\r\n    level = 1\r\n    currentScore = 0\r\n    music = 1\r\n}\r\n\r\n// 创造一个<div class=\"row\">并且有四个子节点<div class=\"cell\">\r\nfunction createrow() {\r\n    var con = $('#con');\r\n    var row = creatediv('row'); //创建div className=row\r\n    const time = 75000 / speed\r\n    row.style.transition = `all ${time}s linear`\r\n    row.style.height = '150px'\r\n    var arr = creatcell(); //定义div cell的类名,其中一个为cell black\r\n\r\n    con.appendChild(row); // 添加row为con的子节点\r\n\r\n    for (var i = 0; i < 4; i++) {\r\n        row.appendChild(creatediv(arr[i])); //添加row的子节点 cell\r\n    }\r\n\r\n    if (con.firstChild == null) {\r\n        con.appendChild(row);\r\n    } else {\r\n        con.insertBefore(row, con.firstChild);\r\n    }\r\n}\r\n\r\n\r\n// 创建一个类名的数组，其中一个为cell black, 其余为cell\r\nfunction creatcell() {\r\n    var temp = ['cell', 'cell', 'cell', 'cell',];\r\n    var i = Math.floor(Math.random() * 4);//随机产生黑块的位置 Math.random()函数参数 0~1的随机数\r\n    temp[i] = 'cell black';\r\n    return temp;\r\n}\r\n\r\n//让黑块动起来\r\nfunction move() {\r\n    let con = $('#con');\r\n    let top = parseInt(window.getComputedStyle(con, null)['top']);\r\n\r\n    if (speed + top > 0) {\r\n        top = 0;\r\n    } else {\r\n        top += speed;\r\n    }\r\n\r\n    con.style.top = top + 'px';//不断移动top值，使它动起来\r\n    over();\r\n    if (top === 0) {\r\n        createrow();\r\n        con.style.top = '-150px';\r\n        delrow();\r\n    }\r\n}\r\n\r\n// 判断游戏是否结束\r\nfunction over() {\r\n    let rows = con.childNodes;\r\n    if ((rows.length === 6) && (rows[rows.length - 1].pass !== 1)) {\r\n        fail();\r\n    }\r\n    for (let i = 0; i < rows.length; i++) {\r\n        if (rows[i].pass1 === 1) {\r\n            fail();\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n// 加速函数\r\nfunction speedup() {\r\n    speed += 2;\r\n}\r\n\r\n//删除某行\r\nfunction delrow() {\r\n    var con = $('#con');\r\n    if (con.childNodes.length === 7) {\r\n        con.removeChild(con.lastChild);\r\n    }\r\n}\r\n\r\n// 记分\r\nfunction score() {\r\n    currentScore += 1\r\n    $('#score').innerHTML = `score ${currentScore}`;//修改分数\r\n    if (currentScore % 10 === 0) {//当分数是10 的倍数时使用加速函数，越来越快\r\n        speedup();\r\n        levelShow()\r\n    }\r\n}\r\n\r\n// 关数显示\r\nfunction levelShow() {\r\n    level += 1\r\n    $(\".level\").innerHTML = `LEVEL ${level} `\r\n    $(\".level\").classList.add('show')\r\n    setTimeout(() => {\r\n        $(\".level\").classList.remove('show')\r\n    }, 1500)\r\n}\r\n\r\nfunction failShow() {\r\n    $(\".fail\").classList.add('show')\r\n    $('.fail-score').innerHTML = `your score: ${currentScore}`\r\n    setTimeout(() => {\r\n        $(\".fail\").classList.remove('show')\r\n    }, 1500)\r\n}"]}